/* ===== TOKENS ===== */
:root{
  /* brand accents (from PFP) */
  --accent:#00CFFF;      /* cyan */
  --accent-2:#FFD700;    /* pixel yellow */

  /* dark */
  --bg:#0f1115;
  --surface:#161922;
  --surface-2:#11141b;
  --text:#e8ecf1;
  --muted:#9aa6b2;
  --border:rgba(255,255,255,.08);

  /* layout */
  --topbar-h:56px;
  --ticker-h:52px;
  --radius:10px;
  --radius-pixel:0px;
  --shadow:0 0 12px rgba(0,0,0,0.35);

  /* panels */
  --panel-h:600px;
}

body.light{
  --bg:#f6f7f9;
  --surface:#ffffff;
  --surface-2:#f1f3f6;
  --text:#0f1115;
  --muted:#6b7280;
  --border:rgba(15,17,21,.08);
  --shadow:0 6px 14px rgba(0,0,0,.06);
}

/* ===== BASE ===== */
html,body{height:100%;overflow-x:hidden}
*{box-sizing:border-box}
body{
  margin:0;
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:background .2s ease,color .2s ease;
}
.container{max-width:1100px;margin:0 auto;padding:12px 16px}

/* ===== HEADER & NAV ===== */
.header{position:sticky;top:0;z-index:20;background:var(--bg);border-bottom:2px solid var(--accent-2)}
.topbar{display:flex;align-items:center;gap:12px;min-height:var(--topbar-h)}
.brand{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--text);text-decoration:none;letter-spacing:.2px}
.brand .name{display:inline-flex;align-items:center;gap:4px}
.brand .tm{font-size:.75em;opacity:.75}
.logo{width:28px;height:28px;border-radius:6px;box-shadow:0 0 0 2px var(--accent)}
.nav{display:flex;gap:12px;margin-left:8px}
.nav a{
  --ink:var(--muted);
  color:var(--ink); text-decoration:none;
  padding:8px 10px;border-radius:8px;border:1px solid transparent;
  transition:color .15s ease, background .15s ease, border-color .15s ease;
}
.nav a:hover{color:var(--text);background:var(--surface-2);border-color:var(--border)}
.nav a.active{color:var(--text);border-color:var(--accent);box-shadow:0 0 0 1px var(--accent) inset}

/* ===== HEADER CONTROLS ===== */
.symbol-form{margin-left:auto;display:flex;gap:8px;align-items:center;flex-wrap:wrap;min-height:40px}
.symbol-form input{
  background:var(--surface-2);border:1px solid var(--border);color:var(--text);
  padding:8px 10px;border-radius:8px;min-width:70px;width:70px;outline:none;
}
.symbol-form input:focus{border-color:var(--accent);box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 30%, transparent)}
.button{
  appearance:none;cursor:pointer;padding:8px 12px;border-radius:8px;border:1px solid transparent;
  font-weight:800;letter-spacing:.25px;background:var(--accent-2);color:#000;
}
.button:hover{filter:brightness(1.05)}
.button:active{transform:translateY(1px)}
.button.outline{background:transparent;color:var(--text);border-color:var(--border)}
.button.outline:hover{border-color:var(--accent);color:var(--accent)}
.button.danger{background:#ef4444;color:#fff}

/* ===== MOBILE NAV (drawer) ===== */
.hamburger{
  display:none;margin-left:auto;background:transparent;border:1px solid var(--border);
  color:var(--text);padding:6px 10px;border-radius:8px;font-size:18px;cursor:pointer;
}
@media (max-width:900px){
  .hamburger{display:block}
  .symbol-form{margin:0}
  .symbol-form input{min-width:50px;width:50px;flex:0 0 auto}
  .symbol-form .button{flex:0 0 auto}
  .nav{
    position:fixed;inset:calc(var(--topbar-h) + 4px) 0 0 auto;width:260px;
    max-height:calc(100% - var(--topbar-h));background:var(--surface);
    border-left:2px solid var(--accent-2);padding:12px;flex-direction:column;gap:8px;
    transform:translateX(100%);transition:transform .2s ease;z-index:10000;
  }
  .nav.open{transform:translateX(0)}
}

/* ===== SURFACES ===== */
.main{padding:24px 16px}
.section{margin:22px auto 28px;max-width:1100px}
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
h1,h2,h3{margin:0 0 12px}
.note{color:var(--muted);margin-top:8px}

/* ===== TICKERS ===== */
.ticker{
  border-top:1px solid var(--border);border-bottom:1px solid var(--border);
  height:var(--ticker-h);display:flex;align-items:center;overflow:hidden;
  contain:layout paint style;backface-visibility:hidden;transform:translateZ(0);
}
.ticker>div{width:100%;height:100%}
.ticker .tradingview-widget-container,
.ticker .tradingview-widget-container__widget{width:100%!important;height:100%!important}

/* ===== NEWS (pixel frame + scroll) ===== */
.card.news-card{background:var(--surface);border:4px solid var(--accent-2);border-radius:var(--radius-pixel);box-shadow:var(--shadow)}
.news-head{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.card.news-card h3{color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin:0;padding-bottom:6px;border-bottom:2px solid var(--accent-2);flex:0 0 auto}
#news .news-card{max-height:var(--panel-h);display:flex;flex-direction:column;overflow:hidden}
#news .news-card .news-head{flex:0 0 auto;border-bottom:1px solid var(--border);padding-bottom:8px;margin-bottom:8px}
#news .news-card .news-scroll{flex:1 1 auto;min-height:0;overflow-y:auto;padding-right:6px}
.news-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}
.news-list li{display:flex;justify-content:space-between;gap:10px;align-items:center;padding:8px 0;border-bottom:1px solid var(--border)}
.news-list li a{color:var(--text);text-decoration:none;flex:1;transition:color .15s ease,text-shadow .15s ease}
.news-list li a:hover{color:var(--accent);text-shadow:0 0 6px color-mix(in srgb, var(--accent) 55%, transparent)}
.news-list li time{color:var(--muted);font-size:.85em;white-space:nowrap}
.updated{color:var(--accent-2);font-size:.85em}

/* ===== NEWS TABS ===== */
#newsTabs{display:flex;gap:8px;margin:6px 0 10px;flex-wrap:wrap}
#newsTabs .tab{
  appearance:none;cursor:pointer;padding:6px 10px;border-radius:8px;border:1px solid var(--border);
  background:var(--surface-2);color:var(--text);font-weight:700;letter-spacing:.25px;
  transition:background .15s ease,color .15s ease,border-color .15s ease,box-shadow .15s ease;
}
#newsTabs .tab:hover{border-color:var(--accent);color:var(--accent)}
#newsTabs .tab.active{background:var(--accent-2);color:#000;border-color:var(--accent-2);box-shadow:0 0 0 1px var(--accent-2) inset}
.hidden{display:none!important}

/* ===== FOOTER & misc ===== */
.footer{border-top:1px solid var(--border);padding:16px;text-align:center;color:var(--muted)}
.x-link{font-weight:bold;color:var(--accent-2);text-decoration:none}
.x-link:hover{background:var(--accent-2);color:#000;padding:2px 6px;border-radius:4px}

/* ===== MOBILE TWEAKS ===== */
@media(max-width:640px){
  .ticker{height:44px}
  .header .ticker:nth-of-type(2){display:none}
  .news-list li time{display:none}
}

/* SPA fade */
#pageMain{transition:opacity .12s ease}
#pageMain.fading{opacity:0}

/* Keep TV iframes from collapsing before load */
#adv-chart-wrap .tradingview-widget-container__widget{min-height:560px}
[data-tv="screener"] .tradingview-widget-container__widget{min-height:520px}
[data-tv="crypto-heatmap"] .tradingview-widget-container__widget{min-height:460px}

/* === ChillZone frames === */
.video-frame{position:relative;border:2px solid var(--border);border-radius:12px;overflow:hidden;box-shadow:0 0 0 0 rgba(0,207,255,0);transition:border-color .2s,box-shadow .2s,transform .2s;background:linear-gradient(180deg,color-mix(in srgb,var(--surface) 96%,transparent),var(--surface-2))}
.video-frame:hover{box-shadow:0 0 16px rgba(0,207,255,.15);border-color:color-mix(in srgb,var(--accent) 35%,var(--border))}
.video-frame.playing{border-color:var(--accent);box-shadow:0 0 10px rgba(0,207,255,.35),0 0 32px rgba(255,215,0,.18);animation:livePulse 1.8s ease-in-out infinite}
@keyframes livePulse{0%,100%{box-shadow:0 0 10px rgba(0,207,255,.28),0 0 28px rgba(255,215,0,.10)}50%{box-shadow:0 0 16px rgba(0,207,255,.45),0 0 40px rgba(255,215,0,.24)}}
.video-frame .live-badge{position:absolute;top:10px;left:10px;display:inline-flex;align-items:center;gap:6px;padding:4px 8px;font-size:12px;font-weight:800;color:#000;background:var(--accent-2);border-radius:999px;letter-spacing:.3px;box-shadow:0 2px 8px rgba(0,0,0,.25);opacity:.9;user-select:none;pointer-events:none}
.video-frame .live-dot{width:8px;height:8px;border-radius:50%;background:#ff2d55;box-shadow:0 0 10px #ff2d55;animation:dotBlink 1s ease-in-out infinite}
@keyframes dotBlink{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(.75);opacity:.75}}

/* Chill grid */
.chill-grid{display:grid;gap:16px;grid-template-columns:1fr}
@media (min-width:900px){.chill-grid{grid-template-columns:1fr 1fr}}
.video-card{padding:12px}
.video-card-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
.video-card h2{font-size:1rem;margin:0}
.live-badge{display:inline-flex;align-items:center;gap:6px;font-size:.75rem;font-weight:800;letter-spacing:.25px;color:#000;background:var(--accent-2);border:1px solid var(--accent-2);padding:4px 8px;border-radius:999px;box-shadow:0 0 0 1px var(--accent-2) inset}
.live-badge .dot{width:8px;height:8px;border-radius:50%;background:#f43f5e;animation:dotBlink 1.25s infinite}

/* Brand micro-interactions */
.brand .logo{transition:transform .4s ease}
.brand .logo:hover{transform:rotate(12deg) scale(1.04)}
.brand.woof .logo{animation:logoShake .5s ease}
@keyframes logoShake{0%{transform:translateX(0) rotate(0)}20%{transform:translateX(-2px) rotate(-3deg)}40%{transform:translateX(2px) rotate(3deg)}60%{transform:translateX(-1px) rotate(-2deg)}80%{transform:translateX(1px) rotate(2deg)}100%{transform:translateX(0) rotate(0)}}
.brand .woof-bubble{position:absolute;top:-8px;left:44px;background:var(--surface-2);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:6px 8px;font-size:12px;box-shadow:var(--shadow);opacity:0;transform:translateY(-6px);transition:opacity .2s ease,transform .2s ease;pointer-events:none}
.brand.woof .woof-bubble{opacity:1;transform:translateY(0)}

/* Support page safety clamp */
#supportLogo,img[data-support-logo],.support-page .pfp-card img.pfp{
  width:160px!important;height:160px!important;max-width:160px!important;max-height:160px!important;object-fit:cover;
}

/* === Ambient aurora (opt-in with body.aurora-on) === */
body.aurora-on::before,body.aurora-on::after{
  content:"";position:fixed;inset:-20%;z-index:-1;pointer-events:none;
  background:
    radial-gradient(40% 60% at 20% 30%, color-mix(in srgb, var(--accent) 45%, transparent), transparent 60%),
    radial-gradient(35% 50% at 80% 70%, color-mix(in srgb, var(--accent-2) 40%, transparent), transparent 60%),
    radial-gradient(30% 40% at 50% 10%, color-mix(in srgb, #a442ff 28%, transparent), transparent 60%);
  filter:blur(42px) saturate(120%);opacity:.28;transform:translate3d(0,0,0) rotate(0deg) scale(1.05);
  animation:aurora-rotate 48s linear infinite, aurora-pulse 9s ease-in-out infinite;
}
body.light.aurora-on::before,body.light.aurora-on::after{opacity:.22}
body.aurora-on::after{mix-blend-mode:screen;opacity:.22;animation:aurora-rotate-rev 72s linear infinite, aurora-pulse 10s ease-in-out infinite}
@keyframes aurora-rotate{0%{transform:translate3d(0,0,0) rotate(0) scale(1.05)}50%{transform:translate3d(0,-1%,0) rotate(180deg) scale(1.06)}100%{transform:translate3d(0,0,0) rotate(360deg) scale(1.05)}}
@keyframes aurora-rotate-rev{0%{transform:translate3d(0,0,0) rotate(0) scale(1.08)}50%{transform:translate3d(0,1%,0) rotate(-180deg) scale(1.07)}100%{transform:translate3d(0,0,0) rotate(-360deg) scale(1.08)}}
@keyframes aurora-pulse{0%,100%{opacity:.28;filter:blur(42px) saturate(120%)}50%{opacity:.34;filter:blur(48px) saturate(135%)}}
@media (prefers-reduced-motion: reduce){ body.aurora-on::before,body.aurora-on::after{animation:none;opacity:.18} }

/* ===== Panels (equal heights on desktop) ===== */
.panel,.panel .panel-card{height:var(--panel-h)}
.panel .tradingview-widget-container,.panel .tradingview-widget-container__widget{height:100%!important;width:100%!important}
.container.wide{max-width:1680px}
@media (max-width:900px){
  :root{--panel-h:520px}
  .panel,.panel .panel-card{height:var(--panel-h)}
}

/* ==================================================== */
/* === TRUE FULLSCREEN CHART, SHARED (Home+Markets) ==== */
/* ==================================================== */
:root{ --chart-card-h: 600px }          /* normal in-flow height */
#chart .card{ height:var(--chart-card-h); position:relative }

/* the “close” button that shows only when fullscreen */
#chartFsClose{
  position:absolute;top:12px;left:12px;z-index:10001;display:none;
  padding:6px 10px;border-radius:8px;border:1px solid var(--border);
  background:var(--surface);color:var(--text);font-weight:700;letter-spacing:.25px;
}
#chartFsClose:hover{border-color:var(--accent);color:var(--accent)}

body.chart-fullscreen{overflow:hidden}
body.chart-fullscreen .header,
body.chart-fullscreen .footer,
body.chart-fullscreen .ticker,
body.chart-fullscreen .main > :not(#chart){display:none!important}

body.chart-fullscreen #chart{
  position:fixed;inset:0;z-index:10000;margin:0!important;padding:0!important;background:var(--bg)
}
body.chart-fullscreen #chart .card{
  position:absolute;inset:0;width:100vw!important;height:100vh!important;border-radius:0!important;box-shadow:none!important;margin:0!important
}
body.chart-fullscreen #adv-chart-wrap,
body.chart-fullscreen #adv-chart-wrap .tradingview-widget-container__widget{
  width:100%!important;height:100%!important
}
body.chart-fullscreen #chartFsClose{display:inline-block}

/* (old expand styles neutralized) */
body.chart-expand *{all:unset}
